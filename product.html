<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details | PHANTOM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="products.js"></script>
    <script src="lang.js" defer></script>
</head>
</head>

<body class="text-slate-200 antialiased bg-[#020617]">

    <!-- Toast Notification -->
    <div id="toast-container" class="fixed top-0 left-1/2 -translate-x-1/2 z-[200] w-full max-w-sm px-4 hidden">
        <div
            class="toast-slide bg-orange-600 text-white px-6 py-4 rounded-md shadow-2xl flex items-center justify-between">
            <div class="flex items-center">
                <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                <span class="font-bold">Added to Cart!</span>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="fixed w-full top-0 z-50 bg-slate-950/80 backdrop-blur-md border-b border-slate-800">
        <nav class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">
            <a href="index.html"
                class="text-2xl font-black tracking-tighter text-white uppercase italic decoration-transparent">Phantom<span
                    class="text-orange-600">.</span></a>
            <div class="flex items-center gap-4">
                <!-- Lang Switcher -->
                <div class="flex items-center gap-2 text-xs font-bold uppercase tracking-widest text-slate-500">
                    <button onclick="switchLanguage('en')" class="hover:text-white transition-colors">EN</button>
                    <span>/</span>
                    <button onclick="switchLanguage('ar')" class="hover:text-white transition-colors">AR</button>
                </div>

                <div
                    class="bg-slate-900 border border-slate-700 px-4 py-2 rounded-md flex items-center cursor-pointer hover:border-orange-600/50 transition-colors">
                    <span class="text-sm font-bold uppercase tracking-widest text-slate-400 rtl:ml-3 ltr:mr-3"
                        data-i18n="cart">Cart</span>
                    <span id="cart-count" class="bg-orange-600 text-white text-xs px-2 py-0.5 rounded">0</span>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Product Section -->
    <main class="pt-24 min-h-screen">
        <div class="max-w-7xl mx-auto md:px-6">
            <div class="flex flex-col md:flex-row gap-0 md:gap-12 md:items-start">

                <!-- Product Image Gallery (Mobile First: Full Width) -->
                <div
                    class="w-full md:w-3/5 h-[50vh] md:h-[85vh] relative bg-slate-900 overflow-hidden md:rounded-lg md:sticky md:top-24">
                    <img id="product-image" src="" alt="Product Image"
                        class="absolute inset-0 w-full h-full object-cover">
                    <div class="absolute bottom-4 left-4 md:bottom-8 md:left-8 flex gap-2">
                        <span
                            class="bg-black/50 backdrop-blur text-white px-3 py-1 text-xs font-bold uppercase tracking-widest rounded border border-white/10">360°
                            View</span>
                    </div>
                </div>

                <!-- Product Details -->
                <div class="w-full md:w-2/5 px-6 py-8 md:py-12 flex flex-col">

                    <!-- Breadcrumbs -->
                    <nav class="text-xs font-bold uppercase tracking-widest text-slate-500 mb-6">
                        <a href="index.html" class="hover:text-orange-600 transition-colors" data-i18n="home">Home</a>
                        <span class="mx-2">/</span>
                        <a href="index.html#products" class="hover:text-orange-600 transition-colors"
                            data-i18n="shoes">Shoes</a>
                        <span class="mx-2">/</span>
                        <span id="product-breadcrumb" class="text-slate-300"></span>
                    </nav>

                    <h1 id="product-name"
                        class="text-4xl md:text-5xl font-black text-white mb-2 uppercase italic leading-none"></h1>

                    <div class="flex items-center gap-4 mb-6">
                        <span id="product-price" class="text-3xl font-bold text-white"></span>
                        <span id="product-old-price" class="text-xl text-slate-500 line-through font-medium"></span>
                        <span
                            class="bg-orange-600/20 text-orange-500 px-2 py-1 text-xs font-bold uppercase tracking-widest rounded border border-orange-600/20"
                            data-i18n="sale">Sale</span>
                        <span
                            class="bg-green-500/10 text-green-500 px-2 py-1 text-xs font-bold uppercase tracking-widest rounded border border-green-500/20"
                            data-i18n="cod_avail">COD
                            Available</span>
                    </div>

                    <p id="product-description" class="text-slate-400 text-lg leading-relaxed mb-8"></p>

                    <!-- Size Selector -->
                    <div class="mb-8">
                        <div class="flex justify-between mb-3">
                            <span class="text-xs font-bold uppercase tracking-widest text-slate-300"
                                data-i18n="select_size">Select Size</span>
                            <button
                                class="text-xs font-bold uppercase tracking-widest text-orange-600 hover:text-orange-500 underline"
                                data-i18n="size_chart">Size
                                Chart</button>
                        </div>
                        <div class="grid grid-cols-4 gap-2">
                            <button
                                class="size-btn py-3 border border-slate-700 rounded hover:border-orange-600 hover:text-white text-slate-400 font-bold transition-all focus:ring-2 focus:ring-orange-600 focus:border-orange-600 focus:text-white">US
                                7</button>
                            <button
                                class="size-btn py-3 border border-slate-700 rounded hover:border-orange-600 hover:text-white text-slate-400 font-bold transition-all focus:ring-2 focus:ring-orange-600 focus:border-orange-600 focus:text-white">US
                                8</button>
                            <button
                                class="size-btn py-3 border border-slate-700 rounded hover:border-orange-600 hover:text-white text-slate-400 font-bold transition-all focus:ring-2 focus:ring-orange-600 focus:border-orange-600 focus:text-white">US
                                9</button>
                            <button
                                class="size-btn py-3 border border-slate-700 rounded hover:border-orange-600 hover:text-white text-slate-400 font-bold transition-all focus:ring-2 focus:ring-orange-600 focus:border-orange-600 focus:text-white">US
                                10</button>
                            <button
                                class="size-btn py-3 border border-slate-700 rounded hover:border-orange-600 hover:text-white text-slate-400 font-bold transition-all focus:ring-2 focus:ring-orange-600 focus:border-orange-600 focus:text-white">US
                                11</button>
                            <button
                                class="size-btn py-3 border border-slate-700 rounded hover:border-orange-600 hover:text-white text-slate-400 font-bold transition-all focus:ring-2 focus:ring-orange-600 focus:border-orange-600 focus:text-white">US
                                12</button>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <!-- Embedded Order Form -->
                    <div class="mb-10 pt-6 border-t border-slate-800">
                        <h3 class="text-xl font-black text-white uppercase italic mb-6" data-i18n="quick_order">Quick
                            Order</h3>
                        <form id="order-form" class="space-y-4" action="send.php" method="POST">
                            <input type="hidden" name="product-name" id="hidden-product-name">
                            <input type="hidden" name="product-price" id="hidden-product-price">
                            <input type="hidden" name="done" value="1">

                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2"
                                    data-i18n="full_name">Full
                                    Name</label>
                                <input type="text" name="client-name" required
                                    class="w-full bg-slate-900 border border-slate-700 text-white px-4 py-3 rounded-md focus:ring-1 focus:ring-orange-600 focus:border-orange-600 outline-none transition placeholder-slate-600"
                                    placeholder="Enter your full name" data-i18n="enter_name">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2"
                                    data-i18n="phone_number">Phone
                                    Number</label>
                                <input type="tel" name="client-phone" required
                                    class="w-full bg-slate-900 border border-slate-700 text-white px-4 py-3 rounded-md focus:ring-1 focus:ring-orange-600 focus:border-orange-600 outline-none transition placeholder-slate-600"
                                    placeholder="Enter your phone number" data-i18n="enter_phone">
                            </div>
                            <div>
                                <label class="block text-xs font-bold text-slate-500 uppercase tracking-widest mb-2"
                                    data-i18n="delivery_address">Delivery
                                    Address</label>
                                <textarea name="client-adress" required
                                    class="w-full bg-slate-900 border border-slate-700 text-white px-4 py-3 rounded-md focus:ring-1 focus:ring-orange-600 focus:border-orange-600 outline-none transition h-24 resize-none placeholder-slate-600"
                                    placeholder="Enter your full delivery address" data-i18n="enter_address"></textarea>
                            </div>

                            <!-- COD Box inside form -->
                            <div
                                class="flex items-start gap-3 p-3 bg-slate-900/50 border border-green-500/30 rounded mb-2">
                                <div class="text-green-500 mt-0.5">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                            d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z">
                                        </path>
                                    </svg>
                                </div>
                                <div>
                                    <h4 class="text-green-500 font-bold uppercase tracking-widest text-xs mb-0.5"
                                        data-i18n="cod_title">Cash
                                        on Delivery</h4>
                                    <p class="text-slate-500 text-[10px] leading-tight" data-i18n="cod_desc_long">Pay
                                        securely with cash when your
                                        shoes arrive.</p>
                                </div>
                            </div>

                            <button type="submit"
                                class="w-full bg-orange-600 text-white py-4 rounded-md font-black text-xl hover:bg-orange-500 transition-all uppercase tracking-tighter custom-shadow"
                                data-i18n="confirm_purchase">
                                Confirm Purchase
                            </button>

                            <div
                                class="flex items-center justify-center text-slate-500 gap-2 text-[10px] uppercase tracking-widest font-bold">
                                <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z">
                                    </path>
                                </svg>
                                <span data-i18n="ssl_secure">SSL Secured Checkout</span>
                            </div>
                        </form>
                    </div>

                    <!-- Details Accordion -->
                    <div class="space-y-4 border-t border-slate-800 pt-6">
                        <div class="group">
                            <button class="w-full flex justify-between items-center text-left"
                                onclick="toggleAccordion('details')">
                                <span class="text-sm font-bold uppercase tracking-widest text-slate-200"
                                    data-i18n="product_details">Product
                                    Details</span>
                                <svg id="icon-details" class="w-5 h-5 text-slate-500 transform transition-transform"
                                    fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div id="content-details" class="hidden mt-4 text-slate-400 text-sm leading-relaxed">
                                <ul id="product-details-list" class="list-disc pl-5 space-y-1"></ul>
                            </div>
                        </div>

                        <div class="group">
                            <button class="w-full flex justify-between items-center text-left"
                                onclick="toggleAccordion('shipping')">
                                <span class="text-sm font-bold uppercase tracking-widest text-slate-200"
                                    data-i18n="shipping_returns">Shipping &
                                    Returns</span>
                                <svg id="icon-shipping" class="w-5 h-5 text-slate-500 transform transition-transform"
                                    fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div id="content-shipping" class="hidden mt-4 text-slate-400 text-sm leading-relaxed"
                                data-i18n="shipping_content">
                                <p>Free express shipping on all orders over $100. We ship worldwide with premium courier
                                    partners (DHL, FedEx).</p>
                                <p class="mt-2">Returns accepted within 30 days of delivery. Item must be unworn and in
                                    original packaging.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Recommendations -->
            <div class="py-24 px-6 border-t border-slate-800 mt-12">
                <h3 class="text-2xl font-black text-white uppercase italic mb-8" data-i18n="you_may_like">You May Also
                    Like</h3>
                <div id="recommendations" class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Dynamic content will be injected here -->
                </div>
            </div>

        </div>
    </main>

    <!-- Footer -->
    <footer class="py-12 bg-slate-950 text-center border-t border-slate-900">
        <div class="text-xl font-black tracking-tighter text-white uppercase italic mb-6">Phantom<span
                class="text-orange-600">.</span></div>
        <p class="text-slate-600 text-sm" data-i18n="rights">© 2024 PHANTOM FOOTWEAR CO. ALL RIGHTS RESERVED.</p>
    </footer>



    <script>
        // --- Product Logic ---
        const currentLang = localStorage.getItem('site_lang') || 'en';
        const urlParams = new URLSearchParams(window.location.search);
        const productId = urlParams.get('id');

        // Find the product
        let product = products.find(p => p.id === productId);

        // Fallback or Home if validation fails (basic handling)
        if (!product && products.length > 0) {
            // Default to first product if not found, or handle error
            product = products[0];
        }

        if (product) {
            document.title = `${product.name} | PHANTOM`;
            document.getElementById('product-image').src = product.image;
            document.getElementById('product-breadcrumb').innerText = currentLang === 'ar' ? (product.name_ar || product.name) : product.name;
            document.getElementById('product-name').innerText = currentLang === 'ar' ? (product.name_ar || product.name) : product.name;
            document.getElementById('product-price').innerText = `$${product.price}`;
            document.getElementById('product-old-price').innerText = `$${product.originalPrice}`;
            document.getElementById('product-description').innerText = product.description;
            document.getElementById('product-description').innerText = currentLang === 'ar' ? (product.description_ar || product.description) : product.description;

            const detailsList = document.getElementById('product-details-list');
            const detailsSource = currentLang === 'ar' ? (product.details_ar || product.details) : product.details;

            if (detailsSource) {
                detailsSource.forEach(detail => {
                    const li = document.createElement('li');
                    li.innerText = detail;
                    detailsList.appendChild(li);
                });
            }

            // Set hidden form values
            document.getElementById('hidden-product-name').value = product.name;
            document.getElementById('hidden-product-price').value = product.price;
        }

        // --- Recommendations Logic ---
        const recContainer = document.getElementById('recommendations');
        const recommendations = products.filter(p => p.id !== product.id).slice(0, 3); // Take other items

        recommendations.forEach(rec => {
            const rName = currentLang === 'ar' ? (rec.name_ar || rec.name) : rec.name; // Loc Name

            const card = document.createElement('div');
            card.className = "group cursor-pointer";
            card.innerHTML = `
                <a href="product.html?id=${rec.id}" class="block">
                    <div class="overflow-hidden rounded-lg mb-4 border border-slate-800 relative">
                        <img src="${rec.image}" alt="${rec.name}" class="w-full h-64 object-cover transform transition-transform duration-500 group-hover:scale-105">
                         <div class="absolute inset-0 bg-black/20 group-hover:bg-transparent transition-all"></div>
                    </div>
                    <h4 class="text-white font-black uppercase italic text-lg mb-1">${rName}</h4>
                    <p class="text-slate-500 font-bold">$${rec.price}</p>
                </a>
            `;
            recContainer.appendChild(card);
        });


        // --- UI Interactions ---
        function toggleAccordion(id) {
            const content = document.getElementById(`content-${id}`);
            const icon = document.getElementById(`icon-${id}`);

            if (content.classList.contains('hidden')) {
                content.classList.remove('hidden');
                icon.style.transform = 'rotate(180deg)';
            } else {
                content.classList.add('hidden');
                icon.style.transform = 'rotate(0deg)';
            }
        }

        // --- Cart/Modal Logic (Reused) ---
        // --- Cart/Modal Logic (Reused) ---
        const orderForm = document.getElementById('order-form');
        const toast = document.getElementById('toast-container');
        const cartCountEl = document.getElementById('cart-count');
        let cartCount = 0;

        // No addToCart or openModal functions needed anymore as the form is direct

        // Form submission is handled by send.php

        // Size selection logic
        const sizeBtns = document.querySelectorAll('.size-btn');
        sizeBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                sizeBtns.forEach(b => {
                    b.classList.remove('ring-2', 'ring-orange-600', 'border-orange-600', 'text-white');
                    b.classList.add('text-slate-400', 'border-slate-700');
                });
                btn.classList.remove('text-slate-400', 'border-slate-700');
                btn.classList.add('ring-2', 'ring-orange-600', 'border-orange-600', 'text-white');
            });
        });

    </script>
</body>

</html>